<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>SuperAzerty</title>
<style>
  :root{--btn:#ff3b30; --ink:#111; --mut:#444; --line:#e9eaee}
  *{box-sizing:border-box}
  body{margin:0;font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Arial;background:#000;color:#fff}
  /* HERO */
  .hero{position:relative;min-height:100vh;overflow:hidden}
  .hero img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
  .hero .enter{position:absolute;right:5vw;bottom:8vh;background:var(--btn);color:#fff;font-weight:700;border:none;border-radius:999px;padding:16px 28px;font-size:22px;cursor:pointer}
    .hero-copy {
    position: absolute; right: 7vw; top: 35vh;
    color: #fff; text-align: left; z-index: 2;
    pointer-events: none; /* ÏïÑÎûò Î≤ÑÌäº ÌÅ¥Î¶≠ ÎßâÏßÄ ÏïäÍ≤å */
    text-shadow: 0 2px 10px rgba(0,0,0,.35);
  }
  .hero-copy h1 {
    margin: 0; line-height: 1;
    font-size: clamp(36px, 8vw, 100px);
  }
  .hero-copy p {
    margin: 30px 0 0; line-height: 1.25;
    font-size: clamp(18px, 4vw, 38px);
	text-align: center;
  }
  /* MODAL */
  .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.65);backdrop-filter:blur(3px);z-index:50}
  .modal.on{display:flex}
  .sheet{width:min(1000px,94vw);background:#fff;border:1px solid #e5e5e5;border-radius:18px;overflow:hidden;box-shadow:0 30px 120px rgba(0,0,0,.45)}
  .slide{position:relative;width:100%;aspect-ratio:16/9;display:none;background:#fff;color:var(--ink)}
  .slide.on{display:block}
  .s1-wrap{position:relative;height:100%;padding:28px 36px}
  .title1{position:absolute;left:7%;top:8%;margin:0;font-size:34px;font-weight:800}
  .bullets{position:absolute;left:7%;top:16%;font-size:26px;line-height:1.6}
  .layout{position:absolute;left:10%;bottom:16%;width:90%;max-width:800px}
  .keysRow{position:absolute;left:30%;bottom:10%;width:15%;max-width:300px}
  .symbols{position:absolute;left:20%;bottom:10%;width:50%;max-width:700px}
  .symbols2{position:absolute;left:20%;bottom:10%;width:60%;max-width:900px}
  .emoji{position:absolute;left:20%;bottom:10%;width:50%;max-width:700px}
  .stepno{position:absolute;left:7%;bottom:7%;color:#666;font-size:16px}
  .frame{height:100%;padding:28px 36px;display:grid;grid-template-columns:220px 1fr;grid-template-rows:auto auto 1fr;gap:8px 24px;position:relative}
  .keyIcon{grid-column:1;grid-row:1 / span 2;align-self:start;justify-self:start;width:170px;height:auto}
  .hd{grid-column:2;grid-row:1;align-self:end;margin:0;font-size:28px;font-weight:800}
  .sub{grid-column:2;grid-row:2;margin:6px 0 0 0;font-size:22px;font-weight:700;color:#000;line-height:1.8}
  .sub small{font-weight:600;color:#333}
  .rule{grid-column:1 / span 2;grid-row:3;align-self:start;margin-top:12px;border-top:1px solid var(--line);padding-top:18px;display:grid;grid-template-columns:46px 1fr;gap:16px}
  .check{width:46px;height:46px}
  .ruleText{font-size:20px;line-height:1.6;color:#111}
  .counter{position:absolute;left:7%;bottom:7%;color:#666;font-size:16px}
  .nav{display:flex;justify-content:space-between;align-items:center;gap:10px;padding:12px 14px;border-top:1px solid #eee;background:#fafafa}
  .btn{border:1px solid #ddd;background:#fff;color:#111;padding:10px 14px;border-radius:10px;cursor:pointer}
  .btn[disabled]{opacity:.5;cursor:not-allowed}
  .dots{display:flex;gap:6px}
  .dot{width:7px;height:7px;border-radius:50%;background:#ddd}
  .dot.on{background:#111}
  .tryBig{display:inline-block;background:var(--btn);color:#fff;border:none;border-radius:999px;padding:16px 34px;font-size:22px;font-weight:800;box-shadow:0 10px 36px rgba(255,59,48,.28);cursor:pointer;position:absolute;right:36px;bottom:36px}
  /* DEMO minimal */
  #demo{display:none;background:#000;color:#fff;padding:28px 18px 64px}
  .demoWrap{max-width:1120px;margin:0 auto;position:relative}
  .demoTop{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}
  .brand{font-size:36px;font-weight:900;letter-spacing:0.2px}
  .brand small{font-size:22px;font-weight:400;color:#d0d0d0;margin-left:10px}
  .topKeys{display:flex;gap:14px}
  .topKeys img{width:64px;height:64px;object-fit:contain;filter:drop-shadow(0 3px 4px rgba(0,0,0,.35))}
  .topKeys {
  transform: translateX(-180px); /* ÏôºÏ™ΩÏúºÎ°ú Ïù¥Îèô */
}
  .surface{display:grid;grid-template-columns:1.25fr 220px;gap:24px;align-items:start}
  .padWrap{background:#1a2230;border:none;min-height:300px;padding:0;border-radius:6px;position:relative;}
  #pad{width:100%;min-height:300px;border:none;background:#1a2230;color:#fff;outline:none;padding:22px;margin:0;resize:none;font:28px/1.6 ui-monospace,Menlo,Consolas,monospace;border-radius:6px}
  .note img{width:100%;height:auto;display:block;max-width:220px}
#emojiPanel{
  position:absolute; z-index:10;
  background:#fff; color:#000;
  border:1px solid #fff; border-radius:10px;
  padding:10px;
  box-shadow:0 8px 26px rgba(0,0,0,.2);
  overflow:hidden;         /* ‚úÖ Ïä§ÌÅ¨Î°§Î∞î Ï†úÍ±∞ */
  max-width:560px;
}
#emojiGrid{
  display:grid;
  grid-template-columns:repeat(8, 44px); /* ÏÖÄÏùÑ ÏïΩÍ∞Ñ ÎÑìÌòÄÏ§å */
  gap:6px;                               /* ÏÖÄ Í∞ÑÍ≤© ÌôïÎ≥¥ */
  justify-items:center;
  align-items:center;
}
#emojiPanel, #emojiPanel *{
  font-family:"Segoe UI Emoji","Apple Color Emoji","Noto Color Emoji",sans-serif;
}
#emojiPanel button{
  border:0; background:none; width:25px; height:25px;
  font-size:22px; line-height:1; cursor:pointer;
}


/* ÎûòÌçº: ÎÖ∏Ìä∏ÏôÄ Î≤ÑÌäºÏùò Í∏∞Ï§Ä Ìè≠ */
.noteWrap{
  position:relative;
  width:340px;              /* ÌïÑÏöîÌïòÎ©¥ Ï°∞Ï†ï */
  display:inline-block;
}

/* ÎÖ∏Ìä∏ */
.note{position:relative;max-width:220px;margin-top: -30px;}
.note>img{ width:100%; display:block; }

/* ÎÖ∏Ìä∏ ÎÇ¥Î∂Ä ÌÖçÏä§Ìä∏ Î∞ïÏä§ */
.noteText{
  position:absolute;
  left:28px;
  right:28px;
  bottom:36px;
  display:flex;
  flex-direction:column;
  z-index:2;
  color:#111;
}
.noteText h4{
  margin:0 0 12px 0;
  font-size:22px;
  font-weight:800;
}
.noteText p{
  margin:0;
  line-height:1.5;
  font-weight:600;
  overflow-wrap:break-word; /* Ï§ÑÎ∞îÍøà Í∞ïÏ†ú */
  word-break:keep-all;      /* Îã®Ïñ¥ Îã®ÏúÑ Ïú†ÏßÄ */
  hyphens:auto;             /* ÌïòÏù¥Ìîà Î∂ÑÌï† ÌóàÏö©(ÏßÄÏõê Î∏åÎùºÏö∞Ï†Ä) */
}

/* Î∞ñÏúºÎ°ú Î∫Ä Îπ®Í∞Ñ Î≤ÑÌäº: ÎÖ∏Ìä∏ ÏôºÏ™Ω Ï†ïÎ†¨ */
.beta-btn-out{
  display:inline-block;
  background:#ff2b2b;
  color:#fff;
  font-weight:800;
  border-radius:14px;
  text-decoration:none;
  transition:background .2s;
}
.beta-btn-out:hover{ background:#ff4646; }



@media (max-width: 768px) {
  .hero .enter {
    padding: 12px 22px;
    font-size: 16px;
    bottom: 6vh;
    right: 6vw;
  }
  .sheet {
    width: 94vw;
    border-radius: 12px;
  }
  .frame {
    display: block;
    padding: 20px;
  }
  .keyIcon {
    width: 100px;
    display: block;
    margin: 0 auto 12px;
  }
  .hd {
    font-size: 22px;
    text-align: center;
  }
  .sub {
    font-size: 18px;
    text-align: center;
  }
  .ruleText {
    font-size: 16px;
  }
  .tryBig {
    position: static;
    display: block;
    margin: 32px auto 0;
    width: 100%;
    font-size: 18px;
    padding: 14px 0;
  }
  .demoTop {
    flex-direction: column;
    gap: 10px;
  }
  .brand {
    font-size: 26px;
  }
  .topKeys img {
    width: 48px;
    height: 48px;
  }
  .surface {
    grid-template-columns: 1fr;
  }
  .note {
    margin-top: 24px;
    max-width: 100%;
    text-align: center;
  }
  #pad {
    font-size: 20px;
    min-height: 320px;
  }
  #reviews h2 {
    font-size: 30px;
  }
  #reviews form {
    grid-template-columns: 1fr;
  }
}

</style>
<style>:root{--ui-font:"Noto Sans",system-ui,-apple-system,"Segoe UI",Arial,sans-serif}</style>
<script>
if (window.matchMedia('(max-width: 768px)').matches) {
  location.href = 'mobile.html';
}
</script>

</head>
<body>
<section class="hero">
  <img src="img/thinkdifferent2.png" alt="background">
<div class="hero-copy">
  <h1>SuperAzerty</h1>
  <p>L‚Äôaccomplissement d‚ÄôAZERTY</p>
</div>
  <button class="enter" id="heroBtn">En savoir plus</button>
</section>

<!-- Tutorial (all 6 slides, Try only on last) -->
<div class="modal" id="modal">
  <div class="sheet">

    <div class="slide on" data-step="0">
      <div class="s1-wrap">
        <h1 class="title1">Votre AZERTY rena√Æt en SuperAZERTY.</h1>
        <div class="bullets">
		  <div>‚Ä¢&nbsp;&nbsp;Accents en un seul toucher, chiffres en un seul toucher.</div>
          <div>‚Ä¢&nbsp;&nbsp;Symboles sans utiliser AltGr.</div>
        </div>
        <img class="layout" src="img/layout.png" alt="five triggers">
        <div class="stepno">1/10</div>
      </div>
    </div>


    <div class="slide" data-step="1">
      <div class="frame">
        <img class="keyIcon" src="img/comma.png" alt="comma trigger key">
        <h3 class="hd">Comment utiliser cette touche : <span style="color:red;">accent aigu</span></h3>
        <p class="sub"><span style="color:red;">,</span>+aeiouycnszrlwgkmp ‚Üí √°√©√≠√≥√∫√Ωƒá≈Ñ≈õ≈∫≈ïƒ∫·∫É«µ·∏±·∏ø·πï <small></small><br>
		        Sinon, elle reste une virgule.</p>
        <div class="rule">
          <svg class="check" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="#10b981" d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/></svg>
          <div class="ruleText">
SuperAZERTY reconna√Æt ces lettres comme des accents lorsqu‚Äôelles suivent une virgule.<br>
Cependant, comme on met toujours un espace apr√®s la virgule en tant que signe de ponctuation, il n‚Äôy a jamais de conflit entre les deux cas.
          </div>
        </div>
        <div class="counter">2/10</div>
      </div>
    </div>

    <div class="slide" data-step="2">
      <div class="frame">
        <img class="keyIcon" src="img/dot.png" alt="two dots trigger key">
        <h3 class="hd">Comment utiliser cette touche : <span style="color:red;">accent tr√©ma</span></h3>
        <p class="sub"><span style="color:red;">..</span>+aeiouy ‚Üí √§√´√Ø√∂√º√ø <small></small><br>
		Sinon, elle reste deux points.</p>
        <div class="rule">
          <svg class="check" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="#10b981" d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/></svg>
          <div class="ruleText">
            Quand vous tapez une ellipse avec deux points, vous ajoutez toujours une espace ensuite.<br>
Ainsi, ce sch√©ma n‚Äôinterf√®re jamais avec votre √©criture normale.<br><br>
Le point et les deux-points ont √©chang√© leur place dans SuperAZERTY.<br>
La saisie du point devient ainsi plus pratique.
          </div>
		  <img class="keysRow" src="img/dot_move.png" alt="five triggers">
        </div>
        <div class="counter">3/10</div>
      </div>
    </div>

    <div class="slide" data-step="3">
      <div class="frame">
        <img class="keyIcon" src="img/semicolon.png" alt="semicolon trigger key">
        <h3 class="hd">Comment utiliser cette touche : <span style="color:red;">accent circonflexe</span> / <span style="color:red;">accent c√©dille</span></h3>
        <p class="sub"><span style="color:red;">;</span>+aeiouy ‚Üí √¢√™√Æ√¥√ª≈∑ <small></small><br>
		<span style="color:red;">;</span>+cstgklnrdh ‚Üí √ß≈ü≈£ƒ£ƒ∑ƒº≈Ü≈ó·∏ë·∏© <small></small><br>
		Sinon, elle reste un point-virgule.</p>
        <div class="rule">
          <svg class="check" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="#10b981" d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/></svg>
          <div class="ruleText">
            On met toujours une espace apr√®s un point-virgule.<br>
Par cons√©quent, il n‚Äôy a jamais de conflit avec la saisie d‚Äôun accent circonflexe.<br><br>
(Dans certains langages de programmation, le point-virgule marque la fin d‚Äôune instruction.<br>
C‚Äôest une bonne habitude de laisser une espace apr√®s celui-ci.)
          </div>
        </div>
        <div class="counter">4/10</div>
      </div>
    </div>

    <div class="slide" data-step="4">
      <div class="frame">
        <img class="keyIcon" src="img/exclaim.png" alt="Grave & Tilde keys">
        <h3 class="hd">Comment utiliser cette touche : <span style="color:red;">accent grave</span> / <span style="color:red;">accent tilde</span></h3>
        <p class="sub"><span style="color:red;">!</span>+aeioun ‚Üí √†√®√¨√≤√π√± <small></small><br>
		Sinon, elle reste le symbole lui-m√™me.</p>
        <div class="rule">
          <svg class="check" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="#10b981" d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/></svg>
          <div class="ruleText">
            SuperAZERTY reconna√Æt ces lettres comme des accents lorsqu‚Äôelles suivent un point d‚Äôexclamation. <br>
			Cependant, comme on met toujours un espace apr√®s le point d‚Äôexclamation en tant que signe de ponctuation, il n‚Äôy a jamais de conflit entre les deux cas.<br>
			(Les d√©veloppeurs peuvent activer l‚Äôoption d√©veloppeur pour √©viter tout conflit pendant la programmation.)
          </div>
        </div>
        <div class="counter">5/10</div>
      </div>
    </div>
	
    <div class="slide" data-step="5">
      <div class="frame">
        <img class="keyIcon" src="img/q.png" alt="q ligature key">
        <h3 class="hd">Comment utiliser cette touche : <span style="color:red;">accent ligature</span></h3>
        <p class="sub"><span style="color:red;">q</span>+a/o ‚Üí √¶/≈ì<br><small></small>
		Sinon, elle reste simplement q.</p>
        <div class="rule">
          <svg class="check" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="#10b981" d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/></svg>
          <div class="ruleText">
            On trouve toujours un u apr√®s q ‚Äî SuperAzerty ne touche jamais √† qu.<br>
Ainsi, cette combinaison sert uniquement √† la saisie des accents, en toute s√©curit√©.<br>
Si la transformation n‚Äôest pas souhait√©e, appuyez simplement une fois sur Retour arri√®re pour l‚Äôannuler imm√©diatement.
          </div>
        </div>
        <div class="counter">6/10</div>
      </div>
    </div>
	
    <div class="slide" data-step="6">
      <div class="frame">
        <img class="keyIcon" src="img/2.png" alt="q ligature key">
        <h3 class="hd">Des chiffres et des symboles plus pratiques</h3>
        <p class="sub">Les chiffres aussi, sans Majuscule<br><small></small>
		Ajout de symboles utiles comme ¬´ ¬ª ‚Äì ‚Äî ‚Ä¢</p>
        <div class="rule">
          <svg class="check" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="#10b981" d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/></svg>
          <div class="ruleText">
            D√©sormais, tapez les chiffres sans Majuscule m√™me sur votre AZERTY.
          </div>
        </div>
        <div class="counter">7/10</div>
      </div>
	  <img class="layout" src="img/numkey.png" alt="five triggers">
    </div>
	
    <div class="slide" data-step="7">
      <div class="frame">
        <img class="keyIcon" src="img/dev.png" alt="q ligature key">
        <h3 class="hd">Caract√®res sp√©ciaux m√©morisables</h3>
        <p class="sub">Appuyez sur la touche fl√©ch√©e, puis sur la touche du symbole souhait√©.<br><small></small>
		Disposition selon l‚Äôinitiale de chaque alias ‚Äì facile √† m√©moriser</p>
        <div class="rule">
          <svg class="check" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="#10b981" d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/></svg>
          <div class="ruleText">
            Un double appui sur la touche fl√©ch√©e affichera la carte des touches.<br>
			D√©sormais, tapez les symboles sp√©ciaux sans Alt Gr.
          </div>
        </div>
        <div class="counter">8/10</div>
      </div>
	  <img class="symbols2" src="img/symbols.png" alt="five triggers">
    </div>
	
    <div class="slide" data-step="8">
      <div class="frame">
        <img class="keyIcon" src="img/emoji.png" alt="q ligature key">
        <h3 class="hd">Touche emoji</h3>
        <p class="sub">Appuyez sur la touche üòÄ pour ouvrir le panneau d‚Äôemojis.<br><small></small></p>
        <div class="rule">
          <svg class="check" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="#10b981" d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/></svg>
          <div class="ruleText">
            Exprimez vos √©motions plus profond√©ment avec des emojis.
          </div>
        </div>
        <div class="counter">9/10</div>
      </div>
	  <img class="emoji" src="img/emoji2.png" alt="five triggers">
    </div>
	
	
    <div class="slide" data-step="9">
      <div class="frame">
        <img class="keyIcon" src="img/tip.png" alt="semicolon trigger key">
        <h3 class="hd">Astuce pour les d√©veloppeurs</h3>
        <p class="sub">Q. SuperAzerty pose-t-il des probl√®mes pendant le codage ?<small></small><br>
		A. Pas d‚Äôinqui√©tude.</p>
        <div class="rule">
          <svg class="check" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill="#10b981" d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"/></svg>
          <div class="ruleText">
            Laissez toujours une espace apr√®s les virgules et les points-virgules, comme vous le feriez normalement.<br>
            Les d√©veloppeurs peuvent utiliser les options d√©veloppeur (ci-dessous) pour √©viter tout conflit avec les accents :<br>
‚Äì Avec l‚Äôoption d√©veloppeur, apr√®s avoir tap√© un point d‚Äôexclamation, vous pouvez entrer une espace d‚Äô√©chappement pour emp√™cher son fonctionnement comme touche d‚Äôaccent.
          </div>
        </div>
        <div class="counter">10/10</div>
		<button class="tryBig" id="tryBig">Essayez maintenant</button>
      </div>
    </div>	
	

    <div class="nav">
      <button id="prev" class="btn" disabled>Pr√©c√©dent</button>
      <div class="dots" id="dots"></div>
      <div>
        <button id="close" class="btn" style="margin-right:8px">Fermer</button>
        <button id="next" class="btn">Suivant</button>
      </div>
    </div>

  </div>
</div>

<!-- DEMO (Ï†ÑÏ≤¥ ÍµêÏ≤¥Î≥∏) -->
<section id="demo">
  <div class="demoWrap">
    <div class="demoTop">
      <div class="brand">SuperAzerty<small> Votre AZERTY est d√©sormais SuperAZERTY.</small></div>
    </div>

    <div class="surface">
      <div class="padWrap">
        <textarea id="pad" placeholder="Tapez ici..." spellcheck="false"></textarea>
		<!-- Inline emoji panel for demo -->
			<div id="emojiPanel" style="display:none; position:absolute; z-index:10;
  background:#fff; color:#000; border:1px solid #fff; border-radius:12px;
  padding:12px; box-shadow:0 8px 26px rgba(0,0,0,.20);
  overflow:hidden; box-sizing:border-box; width:320px;">
				<div id="emojiGrid" style="display:grid; grid-template-columns:repeat(8, 28px); gap:8px; font-size:22px; line-height:1; cursor:pointer;"></div>
				<p style="margin:6px 0 0;text-align:center;font-size:18px;color:#777;">
  (space : close)
</p>

			</div>

			<!-- demo ÌïòÎã® Î†àÏù¥ÏïÑÏõÉ Ïù¥ÎØ∏ÏßÄ -->
		<div class="layoutBar" style="margin:-30px 0 0; text-align:center;">
			<p style="text-align:center; color:#ccc; font-size:16px; margin:0 0 6px;">
üëâ Les touches fl√©ch√©es ne sont pas des touches mortes sur le produit r√©el.
</p>

			<img src="img/layout.png" alt="layout" style="max-width:80%; height:auto; display:inline-block;">
		</div>
      </div>

      <!-- ÎÖ∏Ìä∏ Ï†ÑÏ≤¥ ÏàòÏ†ïÎ≥∏ -->
      <div class="noteWrap" style="position:relative;width:340px;display:inline-block;">
        <div class="note" style="position:relative;width:100%;">
          <img src="img/note.png" alt="note area" style="width:100%;display:block;">
          <div class="noteText"
               style="position:absolute;left:28px;right:28px;top:180px;bottom:36px;
                      display:flex;flex-direction:column;z-index:2;color:#111;overflow:hidden;">
            <h4 style="margin:0 0 12px 0;font-size:22px;font-weight:800;">Remarque</h4>
            <p style="margin:0;line-height:1.5;font-weight:500;
                      overflow-wrap:break-word;word-break:keep-all;hyphens:auto;">
              N‚Äôoubliez pas de vous inscrire au programme b√™ta gratuit !
            </p>
          </div>
        </div>

        <!-- Î≤ÑÌäº: ÎÖ∏Ìä∏ ÏïÑÎûò ÏôºÏ™Ω Ï†ïÎ†¨ -->
        <a href="https://docs.google.com/forms/d/e/1FAIpQLSekvmqVIroU5Rv_BlXE0HNMWPcdfmNCeMReaZfrMdrTaGHcgg/viewform?usp=publish-editor" target="_blank"
           style="display:inline-block;margin:5px 0 0 3px;padding:14px 20px;
                  background:#ff2b2b;color:#fff;font-weight:800;border-radius:16px;
                  text-decoration:none;font-size:20px;transition:background .2s;">
          Rejoignez la b√™ta
        </a>
      </div>
    </div>

  </div>
</section>

<script>
// Modal & navigation
const heroBtn=document.getElementById('heroBtn');
const modal=document.getElementById('modal');
const slides=[...document.querySelectorAll('.slide')];
const prev=document.getElementById('prev');
const next=document.getElementById('next');
const closeBtn=document.getElementById('close');
const dots=document.getElementById('dots');
const tryBig=document.getElementById('tryBig');
const demo=document.getElementById('demo');

function openModal(){document.body.style.overflow='hidden';modal.classList.add('on');show(0);}
function closeModal(){modal.classList.remove('on');document.body.style.overflow='';}
function openDemo(){closeModal();demo.style.display='block';window.scrollTo({top:demo.offsetTop,behavior:'smooth'}); localStorage.setItem('uq_seen_tutorial', '1'); }

heroBtn.addEventListener('click',openModal);
document.addEventListener('keydown', (e) => {
  // üîí ÏûÖÎ†• ÌïÑÎìú/ÏóêÎîîÌÑ∞ ÏïàÏù¥Î©¥ Ï†ÑÏó≠ Îã®Ï∂ïÌÇ§ ÎπÑÌôúÏÑ±Ìôî
  const tag = (e.target?.tagName || '').toLowerCase();
  const isEditable = e.target?.isContentEditable || tag === 'textarea' || tag === 'input' || tag === 'select';
  if (isEditable) return;

  if (e.key === 'Enter' && !modal.classList.contains('on')) {
    e.preventDefault();
    if (window.UQ_IS_SEEN) {
      window.scrollTo({ top: demo.offsetTop, behavior: 'smooth' });
    } else {
      openModal();
    }
    return;
  }

  if (modal.classList.contains('on')) {
    if (e.key === 'Enter')      { e.preventDefault(); if (i < slides.length - 1) show(i + 1); else openDemo(); }
    if (e.key === 'ArrowLeft')  { e.preventDefault(); show(i - 1); }
    if (e.key === 'ArrowRight') { e.preventDefault(); if (i < slides.length - 1) show(i + 1); else openDemo(); }
    if (e.key === 'Escape')     { e.preventDefault(); closeModal(); }
  }
});

if(tryBig) tryBig.addEventListener('click',openDemo);

let i=0;
function renderDots(){dots.innerHTML=''; for(let k=0;k<slides.length;k++){const d=document.createElement('div');d.className='dot'+(k===i?' on':'');dots.appendChild(d);}}
function show(n){i=Math.max(0,Math.min(slides.length-1,n));slides.forEach((el,idx)=>el.classList.toggle('on',idx===i));prev.disabled=(i===0);next.disabled=(i===slides.length-1);renderDots();}
prev.addEventListener('click',()=>show(i-1));
next.addEventListener('click',()=>show(i+1));
closeBtn.addEventListener('click',closeModal);

// Í∏∞Ï°¥ Ï¶âÏãúÏã§Ìñâ Ìï®Ïàò Ï†ÑÏ≤¥ ÍµêÏ≤¥
(function(){
  const SEEN_KEY = 'uq_seen_tutorial';
  const seen = localStorage.getItem(SEEN_KEY) === '1';
  const btn = document.getElementById('heroBtn');

  window.UQ_IS_SEEN = seen;

  // Î≤ÑÌäº ÎùºÎ≤® Í≥†Ï†ï
  btn.textContent = 'En savoir plus';

  if (seen) {
    demo.style.display = 'block';
    document.body.style.overflow = '';   // ÌòπÏãú Ïû†Í≤®ÏûàÏúºÎ©¥ Ìï¥Ï†ú
    btn.onclick = () => {
      window.scrollTo({ top: demo.offsetTop, behavior: 'smooth' });
    };
  } else {
  document.body.style.overflow = 'hidden';
  btn.onclick = openModal;
  }
})();


</script>

<!-- Attach original JS logic, then clear any prefilled guide text -->
<script>

(() => {
  const pad = document.getElementById('pad');

  const vowels = 'aeiouyAEIOUY';
  const mapAcute = {
  'a':'√°','e':'√©','i':'√≠','o':'√≥','u':'√∫','y':'√Ω',
  'A':'√Å','E':'√â','I':'√ç','O':'√ì','U':'√ö','Y':'√ù',
  // extended to consonants
  'c':'ƒá','C':'ƒÜ',
  'n':'≈Ñ','N':'≈É',
  's':'≈õ','S':'≈ö',
  'z':'≈∫','Z':'≈π',
  'r':'≈ï','R':'≈î',
  'l':'ƒ∫','L':'ƒπ',
  'w':'·∫É','W':'·∫Ç',
  'g':'«µ','G':'«¥',
  'k':'·∏±','K':'·∏∞',
  'm':'·∏ø','M':'·∏æ',
  'p':'·πï','P':'·πî'
};
  const mapGrave = {'a':'√†','e':'√®','i':'√¨','o':'√≤','u':'√π','A':'√Ä','E':'√à','I':'√å','O':'√í','U':'√ô'};
  const mapCirc  = {'a':'√¢','e':'√™','i':'√Æ','o':'√¥','u':'√ª','y':'≈∑','A':'√Ç','E':'√ä','I':'√é','O':'√î','U':'√õ','Y':'≈∂'};
  const maptr√©ma = {'a':'√§','e':'√´','i':'√Ø','o':'√∂','u':'√º','y':'√ø','A':'√Ñ','E':'√ã','I':'√è','O':'√ñ','U':'√ú','Y':'≈∏'};
  const mapc√©dille = {
    'c':'√ß','C':'√á',
    's':'≈ü','S':'≈û',
    't':'≈£','T':'≈¢',
    'g':'ƒ£','G':'ƒ¢',
    'k':'ƒ∑','K':'ƒ∂',
    'l':'ƒº','L':'ƒª',
    'n':'≈Ü','N':'≈Ö',
    'r':'≈ó','R':'≈ñ',
    'd':'·∏ë','D':'·∏ê',
    'h':'·∏©','H':'·∏®'
  };
const mapStroke = {
  'o':'√∏','O':'√ò',
  'd':'ƒë','D':'ƒê',
  'h':'ƒß','H':'ƒ¶',
  'l':'≈Ç','L':'≈Å',
  't':'≈ß','T':'≈¶',
  'g':'«•','G':'«§'
};
const mapCaron = {
  'a':'«é','A':'«ç',
  'c':'ƒç','C':'ƒå',
  's':'≈°','S':'≈†',
  'z':'≈æ','Z':'≈Ω',
  'r':'≈ô','R':'≈ò',
  'd':'ƒè','D':'ƒé',
  't':'≈•','T':'≈§',
  'n':'≈à','N':'≈á',
  'e':'ƒõ','E':'ƒö',
  'l':'ƒæ','L':'ƒΩ'
};
const mapDotAbove = {
  'a':'»ß','A':'»¶',
  'b':'·∏É','B':'·∏Ç',
  'c':'ƒã','C':'ƒä',
  'd':'·∏ã','D':'·∏ä',
  'e':'ƒó','E':'ƒñ',
  'f':'·∏ü','F':'·∏û',
  'g':'ƒ°','G':'ƒ†',
  'h':'·∏£','H':'·∏¢',
  'm':'·πÅ','M':'·πÄ',
  'n':'·πÖ','N':'·πÑ',
  'o':'»Ø','O':'»Æ',
  'p':'·πó','P':'·πñ',
  'r':'·πô','R':'·πò',
  's':'·π°','S':'·π†',
  't':'·π´','T':'·π™',
  'w':'·∫á','W':'·∫Ü',
  'x':'·∫ã','X':'·∫ä',
  'y':'·∫è','Y':'·∫é',
  'z':'≈º','Z':'≈ª'
};

const mapTilde = {
  'a':'√£','A':'√É',
  'o':'√µ','O':'√ï',
  'e':'·∫Ω','E':'·∫º',
  'i':'ƒ©','I':'ƒ®',
  'u':'≈©','U':'≈®',
  'n':'√±','N':'√ë'
};

  // ---- caret utils
  const sel = el => ({start: el.selectionStart, end: el.selectionEnd, val: el.value});
  const setCaret = (el, p) => { el.selectionStart = el.selectionEnd = p; };
  const countTrailing = (el, ch) => {
    const {start, val} = sel(el); let i=start-1, c=0; while(i>=0 && val[i]===ch){c++; i--;} return c;
  };
  const hasTrailingOne = (el, ch) => {
    const {start, val} = sel(el); return start>0 && val[start-1]===ch;
  };
  function replaceRange(el, from, to, text){
    const {val} = sel(el);
    el.value = val.slice(0, from) + text + val.slice(to);
    setCaret(el, from + text.length);
  }
  let lastUndo = null;
  function snapshot() {
    const {start, end, val} = sel(pad);
    lastUndo = {val, start};
  }
function restore() {
  if (!lastUndo) return;

  // 1) Ï†ÄÏû•Ìï¥ Îëî Ïä§ÎÉÖÏÉ∑ÏúºÎ°ú ÎêòÎèåÎ¶º
  pad.value = lastUndo.val;
  setCaret(pad, lastUndo.start);

  // 2) Î≥µÍµ¨ ÏßÅÌõÑ ‚ÄúÎã§Ïùå 1ÌÉÄÎßå‚Äù Í∞ôÏùÄ Î™®ÏùåÏù¥Î©¥ Î≥ÄÌôò Î¨¥ÏãúÌïòÎèÑÎ°ù ÌîåÎûòÍ∑∏ Ïû•Ï†Ñ
  //    (lastTransformÎäî 2Î≤à Îã®Í≥ÑÏóêÏÑú Í∞Å Î≥ÄÌôò Î∂ÑÍ∏∞ÏóêÏÑú Ï±ÑÏõåÎëî Î©îÌÉÄ)
  bypassOnce = lastTransform ? { ...lastTransform } : null;

  // 3) Ìïú Î≤àÎßå Ïì∞Îäî Ïä§ÎÉÖÏÉ∑ ÎπÑÏö∞Í∏∞
  lastUndo = null;
}

// ---- smart-bypass state (post-restoreÏö© Î©îÌÉÄ & 1ÌöåÏÑ± Î∞îÏù¥Ìå®Ïä§ ÌîåÎûòÍ∑∏)
let lastTransform = null;   // { trigger: string, target: string, posAfterTrigger: number }
let bypassOnce    = null;   // { trigger: string, target: string, posAfterTrigger: number }

  pad.addEventListener('keydown', (ev) => {
    // ÌÉÄÏù¥Ìïë ÏãúÏûëÌïòÎ©¥ Ïù¥Ï†Ñ Î≥ÄÌôò Î≥µÍµ¨ Ïä§ÎÉÖÏÉ∑ ÌèêÍ∏∞
  if (!ev.ctrlKey && !ev.metaKey && !ev.altKey && ev.key !== 'Backspace' && ev.key !== 'Escape') {
    lastUndo = null;
  }

// === Emoji panel (demo only) ===
const emojiPanel = document.getElementById('emojiPanel');
const emojiGrid  = document.getElementById('emojiGrid');
const EMOJIS = Array.from('üòÄüòÅüòÇü§£üòÉüòÑüòÖüòâüòäüòçüòòüòúü§îü§óü§©ü•≥üòéüò≠üò°üß°üíîüí¢üí¶üëçüôè‚ú®üî•üíØ‚úÖ‚ùåüåüüéâüéÅüìåüçî‚òïüöó‚úàüè°üè¨‚Äª¬©¬Æ‚Ñ¢üëàüëâüëÜüëá');
function ensureEmojiGrid() {
  if (!emojiGrid || emojiGrid.childElementCount) return;
  EMOJIS.forEach(e => {
    const b = document.createElement('button');
    b.type = 'button';
    // ÌôîÏÇ¥ÌëúÎ•òÎäî ÏÉâ Ïù¥Î™®ÏßÄ Í∞ïÏ†ú(Emoji Presentation)
	const needsVS16 = /^(?:[‚Üê‚Üí‚Üë‚Üì‚Üî‚Üï‚üµ‚ü∂‚ü∑])$/u.test(e);
	b.textContent = needsVS16 ? (e + '\uFE0F') : e;

    b.style.cssText = 'border:0;background:none;width:38px;height:38px;font-size:28px;line-height:1;cursor:pointer;';

b.addEventListener('click', () => {
  const picked = e;
    const { from, to } = lastDefaultEmoji;
    pad.setSelectionRange(from, to);
    pad.setRangeText(picked, from, to, 'end');
    lastDefaultEmoji = null;
  
  closeEmojiPanel();
  pad.focus();
});

    emojiGrid.appendChild(b);
  });
}

function insertAtCaret(text){
  const s = pad.selectionStart ?? pad.value.length;
  const e = pad.selectionEnd ?? pad.value.length;
  const v = pad.value ?? '';
  pad.value = v.slice(0, s) + text + v.slice(e);
  pad.selectionStart = pad.selectionEnd = s + text.length;
}

function openEmojiPanel(){
  ensureEmojiGrid();
  // pad Ïª§ÏÑú ÏïÑÎûòÏ™ΩÏóê ÎùÑÏö∞Í∏∞
  const rectPad = pad.getBoundingClientRect();
  const sel = pad.selectionStart ?? 0;

  // ÎåÄÏ∂© pad ÏôºÏ™Ω ÌïòÎã® Í∏∞Ï§ÄÏúºÎ°ú Í≥†Ï†ï (Ï†ïÌôï Ïª§ÏÑú Ï∂îÏ†ÅÏùÄ Î≥µÏû°ÌïòÎãà Í∞ÑÎã®Ìûà)
	emojiPanel.style.display = 'block';
	emojiPanel.style.left = '12px';                  // ‚Üê Ï§ëÏïôÏ†ïÎ†¨Ïö© '' ÏïÑÎãàÍ≥† 12px
	emojiPanel.style.top  = (rectPad.height - 48) + 'px';

  // Î∞ñ ÌÅ¥Î¶≠/ESCÎ°ú Îã´Í∏∞
  window.addEventListener('mousedown', onOutsideClose, { capture:true });
  window.addEventListener('keydown', onEscClose);
}

function closeEmojiPanel(){
	lastDefaultEmoji = null; // Îã´ÏùÑ ÎïåÎèÑ Î¶¨ÏÖã(Ïä§ÌéòÏù¥Ïä§Î°ú Îã´Í≥† ÎÇòÏ§ëÏóê ÌÅ¥Î¶≠Ìï¥ÎèÑ Í≥ºÍ±∞Í±∏ Ïïà ÏßÄÏõÄ)
  if (!emojiPanel) return;
  emojiPanel.style.display = 'none';
  window.removeEventListener('mousedown', onOutsideClose, { capture:true });
  window.removeEventListener('keydown', onEscClose);
}
function onOutsideClose(e){
  if (!emojiPanel.contains(e.target)) closeEmojiPanel();
}
function onEscClose(e){
  if (e.key === 'Escape') { e.preventDefault(); closeEmojiPanel(); }
}


  // ÏΩúÎ°†(:) ‚Üí Ï†ê(.)ÏúºÎ°ú ÎåÄÏ≤¥ Ï≤òÎ¶¨ (Ìä∏Î¶¨Í±∞Ïö©), Ï§ëÎ≥µ ÏÇΩÏûÖ Î∞©ÏßÄ
  if (ev.key === ':') {
    ev.preventDefault();
	lastUndo = null;
    const s = pad.selectionStart ?? pad.value.length;
    const e = pad.selectionEnd ?? pad.value.length;
    const v = pad.value ?? '';
    // Ï†ê ÌïòÎÇòÎßå ÏÇΩÏûÖ
    pad.value = v.slice(0, s) + '.' + v.slice(e);
    pad.selectionStart = pad.selectionEnd = s + 1;
    return;
  }

  // Ï†ê(.) ‚Üí ÏΩúÎ°†(:) Î¶¨Îßµ (ÏÇ¨Ïö©Ïûê ÌëúÏãúÏö©)
  if (ev.key === '.') {
    ev.preventDefault();
	lastUndo = null;
    const s = pad.selectionStart ?? pad.value.length;
    const e = pad.selectionEnd ?? pad.value.length;
    const v = pad.value ?? '';
    pad.value = v.slice(0, s) + ':' + v.slice(e);
    pad.selectionStart = pad.selectionEnd = s + 1;
    return;
  }
 
 const remap = {
  '.': ':',
  '√π': "'",
  '&': '1',
  '√©': '2',
  '"': '3',
  "'": '4',
  '(': '5',
  '-': '6',
  '√®': '7',
  '_': '8',
  '√ß': '9',
  '√†': '0',
  '1': '&',
  '2': '¬´',
  '3': '"',
  '4': '¬ª',
  '5': '(',
  '6': '-',
  '7': '‚Äì',
  '8': '_',
  '9': '‚Äî',
  '0': '‚Ä¢',
  ')': '¬∞',
  '¬∞': ')',
  '+': '=',
  '=': '+',
  '√¢': '@',
  '√™': '‚Ç¨',
  '^': '‚Üí ',
  '¬®': '‚Üê '
};
  if (remap[ev.key]) {
    ev.preventDefault();
	lastUndo = null;
    const s = pad.selectionStart ?? pad.value.length;
    const e = pad.selectionEnd ?? pad.value.length;
    const v = pad.value ?? '';
    const out = remap[ev.key];
    pad.value = v.slice(0, s) + out + v.slice(e);
    pad.selectionStart = pad.selectionEnd = s + out.length;
    return;
  }
  
  // ¬≤ : Îã®Ïùº ‚Üí Ïù¥Î™®ÏßÄ Ìå®ÎÑê, Shift+¬≤ ‚Üí '¬≤' ÏûÖÎ†•
if (ev.key === '¬≤') {
  ev.preventDefault();
  if (ev.shiftKey) {
    // Shift+¬≤Îäî Ïã§Ï†ú ¬≤ ÏûÖÎ†•
    const s = pad.selectionStart ?? pad.value.length;
    const e2 = pad.selectionEnd ?? pad.value.length;
    const v = pad.value ?? '';
    pad.value = v.slice(0, s) + '¬≤' + v.slice(e2);
    pad.selectionStart = pad.selectionEnd = s + 1;
  } else {
    // Îã®Ïùº ¬≤ ‚Üí Îç∞Î™®Ïö© Ïù¥Î™®ÏßÄ Ìå®ÎÑê Ïó¥Í∏∞/ÌÜ†Í∏Ä
	insertAtCaret('üôÇ');
	// Í∏∞Î≥∏ üôÇ ÏÇΩÏûÖ ÏßÅÌõÑ ÏúÑÏπò Í∏∞Ïñµ
{
  const caret = pad.selectionStart ?? pad.value.length;
  const len = 'üôÇ'.length;           // JSÏóêÏÑúÎäî 2 (ÏÑúÎ°úÍ≤åÏù¥Ìä∏ ÌéòÏñ¥)
  lastDefaultEmoji = { from: caret - len, to: caret };
}

    openEmojiPanel();
  }
  return;
}

if (ev.key === ' ' && lastDefaultEmoji) {
  if (emojiPanel.style.display === 'block') {
    // Ìå®ÎÑêÏù¥ Ïó¥Î†§ ÏûàÏùÑ ÎïåÎäî Îã´Í∏∞Îßå (Í≥µÎûÄ ÏûÖÎ†• Î∞©ÏßÄ)
    ev.preventDefault();
    closeEmojiPanel();
  } else {
    // Ìå®ÎÑêÏù¥ Îã´Ìûå ÏÉÅÌÉúÏóêÏÑúÎäî Í∑∏ÎÉ• Ïä§ÌéòÏù¥Ïä§ Ï†ïÏÉÅ ÏûÖÎ†•
    closeEmojiPanel();
  }
  return;
}

// ÌèâÏÜåÏóêÎäî Ïä§ÌéòÏù¥Ïä§ Ï†ïÏÉÅ ÏûÖÎ†•


	if (ev.key === 'Enter') return; // Í∏∞Î≥∏ ÏóîÌÑ∞ ÏûÖÎ†• ÌóàÏö©
    if (ev.key === 'Escape') { ev.preventDefault(); restore(); return; }
    if (ev.ctrlKey || ev.metaKey || ev.altKey) return;
	
	if (lastUndo && ev.key !== 'Backspace' && ev.key !== 'Escape') {
    lastUndo = null;
  }
	
  if (ev.key === 'Backspace' && lastUndo) {
    ev.preventDefault();   // Í∏∞Î≥∏ ÏÇ≠Ï†ú ÎßâÍ≥†
    restore();             // ‚Üê EscÏôÄ Í∞ôÏùÄ Î≥µÍµ¨ Ïã§Ìñâ
    return;                // Ïù¥ÌõÑ Î≥ÄÌôò Î∂ÑÍ∏∞Îì§Î°ú Ïïà ÎÇ¥Î†§Í∞ê
  }	
	
    const k = ev.key;
    if (k.length !== 1) return;
if (bypassOnce) {
  const k = ev.key;                 // Î∞©Í∏à ÎàÑÎ•∏ ÌÇ§(Î¨∏Ïûê 1Í∞ú)
  const { posAfterTrigger, target } = bypassOnce;

  // Ïª§ÏÑúÍ∞Ä Ìä∏Î¶¨Í±∞ Î∞îÎ°ú Îí§Ïóê ÏûàÍ≥†, Ïù¥Î≤à ÌÇ§Í∞Ä 'ÎèôÏùº ÌÉÄÍ≤ü(ÎåÄ/ÏÜåÎ¨∏Ïûê Íµ¨Î∂Ñ)'Ïù¥Î©¥ Í∞úÏûÖ Í∏àÏßÄ
  if (pad.selectionStart === posAfterTrigger && k === target) {
    bypassOnce = null;              // 1ÌöåÏÑ± ÏÜåÎ™®
    return;                         // ÏïÑÎ¨¥ Î≥ÄÌôòÎèÑ ÌïòÏßÄ ÏïäÍ≥† Í∑∏ÎåÄÎ°ú ÌÜµÍ≥º
  }
  // ÏúÑÏπòÍ∞Ä Îã¨ÎùºÏ°åÍ±∞ÎÇò Îã§Î•∏ ÌÇ§Î©¥ Î∞îÏù¥Ìå®Ïä§ Ìï¥Ï†úÌïòÍ≥† ÌèâÏÜå Î°úÏßÅ ÏßÑÌñâ
  bypassOnce = null;
}
if (countTrailing(pad, ',') >= 2 && mapStroke[k]) {
  ev.preventDefault(); snapshot();
  const cnt = countTrailing(pad, ',');       // 2,3,4...
  const keep = Math.max(0, cnt - 2);
  const { start, val } = sel(pad);
  const left  = val.slice(0, start - cnt) + ','.repeat(keep);
  const right = val.slice(start);
  const out   = mapStroke[k];

  lastTransform = { trigger: ',,', target: k, posAfterTrigger: (start - cnt) + keep + 2 };
  pad.value = left + out + right;
  setCaret(pad, left.length + out.length);
  return;
}
if (countTrailing(pad, ';') >= 2 && mapCaron[k]) {
  ev.preventDefault(); snapshot();
  const cnt = countTrailing(pad, ';');       // 2,3,4...
  const keep = Math.max(0, cnt - 2);
  const { start, val } = sel(pad);
  const left  = val.slice(0, start - cnt) + ';'.repeat(keep);
  const right = val.slice(start);
  const out   = mapCaron[k];

  lastTransform = { trigger: ';;', target: k, posAfterTrigger: (start - cnt) + keep + 2 };
  pad.value = left + out + right;
  setCaret(pad, left.length + out.length);
  return;
}
if (countTrailing(pad, 'q') === 1 && (k==='a'||k==='A'||k==='o'||k==='O'||k==='s'||k==='S')) {
  ev.preventDefault(); snapshot();
  const { start } = sel(pad);
  let out = k;
  if (k === 'a') out = '√¶';
  else if (k === 'A') out = '√Ü';
  else if (k === 'o') out = '≈ì';
  else if (k === 'O') out = '≈í';
  else if (k === 's') out = '√ü';
  else if (k === 'S') out = '·∫û';

  lastTransform = { trigger: 'q', target: k, posAfterTrigger: (start - 1) + 1 };
  replaceRange(pad, start - 1, start, out);
  return;
}
if (countTrailing(pad, 'q') >= 2 && mapDotAbove[k]) {
  ev.preventDefault(); snapshot();
  const cnt = countTrailing(pad, 'q');       // 2,3,...
  const keep = Math.max(0, cnt - 2);
  const { start, val } = sel(pad);
  const left  = val.slice(0, start - cnt) + 'q'.repeat(keep);
  const right = val.slice(start);
  const out   = mapDotAbove[k];

  lastTransform = { trigger: 'qq', target: k, posAfterTrigger: (start - cnt) + keep + 2 };
  pad.value = left + out + right;
  setCaret(pad, left.length + out.length);
  return;
}
if ((k==='a'||k==='e'||k==='i'||k==='o'||k==='u'||k==='A'||k==='E'||k==='I'||k==='O'||k==='U') && hasTrailingOne(pad,'`')) {
  ev.preventDefault(); snapshot();
  const {start} = sel(pad);
  const out = mapGrave[k] || k;
  lastTransform = { trigger: '`', target: k, posAfterTrigger: (start - 1) + 1 };
  replaceRange(pad, start-1, start, out);
  return;
}
if (hasTrailingOne(pad, '!')) {
  const _k = ev.key; // (Í∏∞Ï°¥ kÏôÄ Ï∂©Îèå Î∞©ÏßÄÏö©)
  if (
    _k==='a'||_k==='e'||_k==='i'||_k==='o'||_k==='u'||_k==='n'||
    _k==='A'||_k==='E'||_k==='I'||_k==='O'||_k==='U'||_k==='N'
  ) {
    ev.preventDefault(); snapshot();
    const { start } = sel(pad);

    // n/NÎßå √±/√ë, ÎÇòÎ®∏ÏßÄÎäî Í∏∞Ï°¥ Í∑∏Î†àÏù¥Î∏å Îßµ ÏÇ¨Ïö©
    const out =
      _k==='n' ? '√±' :
      _k==='N' ? '√ë' :
      (mapGrave && mapGrave[_k]) ? mapGrave[_k] : _k;

    // '?' Î∞îÎ°ú ÏïûÏùò Ìä∏Î¶¨Í±∞ Ìïú Í∏ÄÏûêÎ•º Í≤∞Í≥ºÎ°ú ÏπòÌôò
    lastTransform = { trigger: '!', target: _k, posAfterTrigger: (start - 1) + 1 };
    replaceRange(pad, start - 1, start, out);
    return;
  }
}
if (hasTrailingOne(pad, '~') && mapTilde[k]) {
  ev.preventDefault(); snapshot();
  const { start } = sel(pad);
  const out = mapTilde[k];
  lastTransform = { trigger: '~', target: k, posAfterTrigger: (start - 1) + 1 };
  replaceRange(pad, start - 1, start, out);
  return;
}
    if (vowels.includes(k) && countTrailing(pad, '.') >= 2) {
      ev.preventDefault(); snapshot();
      const cnt = countTrailing(pad, '.');           // 2,3,4...
      const keep = Math.max(0, cnt-2);               // keep (cnt-2) dots
      const {start, val} = sel(pad);
      const left = val.slice(0, start - cnt) + '.'.repeat(keep);
      const right = val.slice(start);
      const out = maptr√©ma[k] || k;
	  lastTransform = { trigger: '..', target: k, posAfterTrigger: (start - cnt) + keep + 2 };
      pad.value = left + out + right;
      setCaret(pad, left.length + out.length);
      return;
    }
    if (countTrailing(pad, ',') >= 1 && mapAcute[k]) {
      ev.preventDefault(); snapshot();
      const cnt = countTrailing(pad, ',');           // 1 or more
      const keep = Math.max(0, cnt-1);               // keep (cnt-1) commas
      const {start, val} = sel(pad);
      const left = val.slice(0, start - cnt) + ','.repeat(keep);
      const right = val.slice(start);
      const out = mapAcute[k] || k;
      lastTransform = {
        trigger: ',',
        target: k,
        posAfterTrigger: (start - cnt) + keep + 1
      };
      pad.value = left + out + right;
      setCaret(pad, left.length + out.length);
      return;
    }
	
    if (countTrailing(pad, '^') >= 1 && mapDev[k]) {
      ev.preventDefault(); snapshot();
      const cnt = countTrailing(pad, '^');           // 1 or more
      const keep = Math.max(0, cnt-1);               // keep (cnt-1) commas
      const {start, val} = sel(pad);
      const left = val.slice(0, start - cnt) + '^'.repeat(keep);
      const right = val.slice(start);
      const out = mapDev[k] || k;
      lastTransform = {
        trigger: '^',
        target: k,
        posAfterTrigger: (start - cnt) + keep + 1
      };
      pad.value = left + out + right;
      setCaret(pad, left.length + out.length);
      return;
    }
	
    if (vowels.includes(k) && countTrailing(pad, ';') >= 1) {
      ev.preventDefault(); snapshot();
      const cnt = countTrailing(pad, ';');
      const keep = Math.max(0, cnt-1);
      const {start, val} = sel(pad);
      const left = val.slice(0, start - cnt) + ';'.repeat(keep);
      const right = val.slice(start);
      const out = mapCirc[k] || k;
	  
	  lastTransform = { trigger: ';', target: k, posAfterTrigger: (start - cnt) + keep + 1 };
	  
      pad.value = left + out + right;
      setCaret(pad, left.length + out.length);
      return;
    }
    // Priority note: vowels keep circonflexe (handled above). c√©dille applies to non-vowel letters with mappings.
    if (countTrailing(pad, ';') >= 1 && !vowels.includes(k) && mapc√©dille[k]) {
      ev.preventDefault(); snapshot();
      const cnt = countTrailing(pad, ';');
      const keep = Math.max(0, cnt-1);
      const {start, val} = sel(pad);
      const left = val.slice(0, start - cnt) + ';'.repeat(keep);
      const right = val.slice(start);
      const out = mapc√©dille[k];
      lastTransform = { trigger: ';', target: k, posAfterTrigger: (start - cnt) + keep + 1 };
      pad.value = left + out + right;
      setCaret(pad, left.length + out.length);
      return;
    }
    if ((k==='a'||k==='e'||k==='i'||k==='o'||k==='u'||k==='A'||k==='E'||k==='I'||k==='O'||k==='U') && hasTrailingOne(pad,'`')) {
      ev.preventDefault(); snapshot();
      const {start} = sel(pad);
      const out = mapGrave[k] || k;
	  lastTransform = { trigger: '`', target: k, posAfterTrigger: (start - 1) + 1 };
      replaceRange(pad, start-1, start, out);
      return;
    }
  });
  
/* DEV: ^x ‚Üí Í∏∞Ìò∏ (Í∞ÄÎ¶º ÌòÑÏÉÅ Í∞ïÏ†ú Ìï¥Ï†ú) */
pad.addEventListener('input', () => {
  const v = pad.value || '';
  const s = pad.selectionStart ?? v.length;
  if (s < 2) return;

  const head = v[s - 2];
  const tail = v[s - 1];

  // ^ Îã§Ïùå Ìïú Í∏ÄÏûêÎßå Í∞úÎ∞úÏûê Îßµ
  const mapDev = { r:'\\', t:'~', p:'|', s:'[', d:']', g:'`', h:'#', c:'^', b:'{', n:'}', l:'<', m:'>' };
  const out = (head === '^') ? mapDev[tail] : null;
  if (!out) return;

  // 1Ìã± Îä¶Ï∂∞ÏÑú IME/Ï°∞Ìï© ÌëúÏãúÍ∞Ä ÌôïÏ†ïÎêú Îí§ Í∞ÄÎ¶º Ìï¥Ï†ú
  requestAnimationFrame(() => {
    const v2 = pad.value || '';
    const s2 = pad.selectionStart ?? v2.length;
    if (s2 >= 2 && v2[s2 - 2] === '^' && v2[s2 - 1] === tail) {
      pad.setRangeText(out, s2 - 2, s2, 'end'); // '^x' ‚Üí out
      pad.blur(); pad.focus();                  // Ï°∞Ìï© Í∞ÄÎ¶º Í∞ïÏ†ú Ìï¥Ï†ú
    }
  });
});

})();

</script>
<script>
// After original logic loads, clear any prefilled demo hints
window.addEventListener('load', function(){
  var ta = document.getElementById('pad');
  if(ta) ta.value = "";
});
</script>

<!-- ===== Reviews: Accents Libres (copied style) ===== -->
<section id="reviews" style="background:#f3f1e7; padding:64px 0; font-family:var(--ui-font);">
  <h2 style="text-align:center; font-size:42px; margin:0 0 12px; color:#000;">Laissez un avis</h2>
  <p style="text-align:center; margin:0 0 28px; line-height:1.6; color:#333;">
    SuperAzerty - L‚Äôaccomplissement d‚ÄôAZERTY
  </p>

  <!-- form -->
  <div style="max-width:760px; margin:0 auto; background:#fff; border-radius:14px; padding:20px; box-shadow:0 2px 8px rgba(0,0,0,.06);">
    <form id="reviewForm" style="display:grid; grid-template-columns:1fr 200px; gap:12px 16px; align-items:center;">
      <input id="rvName" type="text" placeholder="Pseudonyme (facultatif)" style="grid-column:1/2; height:46px; border:1px solid #ddd; border-radius:10px; padding:0 12px; font-size:16px;">
      <div style="grid-column:2/3; display:flex; align-items:center; gap:8px; justify-content:flex-end;">
        <span style="font-size:14px; color:#666;">√âvaluation</span>
        <div id="rvStars" aria-label="rating" style="display:flex; cursor:pointer; font-size:24px; line-height:1;"></div>
      </div>
      <!-- spam honeypot -->
      <input id="rvHoney" style="display:none">

      <textarea id="rvText" required placeholder="Laissez votre avis (obligatoire)" style="grid-column:1/3; min-height:120px; border:1px solid #ddd; border-radius:10px; padding:12px; font-size:16px; resize:vertical;"></textarea>
      <button type="submit" style="grid-column:1/3; height:48px; border:0; border-radius:10px; font-size:16px; font-weight:700; background:#222; color:#fff; cursor:pointer;">Envoyer</button>
      <div style="grid-column:1/3; font-size:13px; color:#777; text-align:right;">Le pseudonyme est facultatif, mais la note et l‚Äôavis sont obligatoires.</div>
    </form>
  </div>

  <!-- list -->
  <div id="rvList" style="max-width:760px; margin:24px auto 0; display:flex; flex-direction:column; gap:16px;"></div>
</section>

<script>
(function(){
  const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbw1UKKakpiYdMfZlTz8gJv5r8euypyT0W-4-EdhMkEsAhMq3AEVhuQd2xTOn_ws6q_ptA/exec';
  const $reviewsSec = document.getElementById('reviews');
  const $form  = document.getElementById('reviewForm');
  const $name  = document.getElementById('rvName');
  const $text  = document.getElementById('rvText');
  const $stars = document.getElementById('rvStars');
  let   $list  = document.getElementById('rvList') || document.getElementById('reviewList') || ($reviewsSec && $reviewsSec.querySelector('ul'));

  if (!$list && $reviewsSec) {
    $list = document.createElement('ul');
    $list.id = 'reviewList';
    $list.style.listStyle='none';
    $list.style.padding='0';
    $list.style.margin='0';
    $list.style.display='grid';
    $list.style.gap='12px';
    $reviewsSec.appendChild($list);
  }

  if (!$reviewsSec || !$form || !$stars || !$list) return;

  let starVal = 0;
  function renderStars(v){
    $stars.innerHTML='';
    for(let i=1;i<=5;i++){
      const s=document.createElement('span');
      s.textContent=i<=v?'‚òÖ':'‚òÜ';
      s.style.color=i<=v?'#f7b500':'#ccc';
      s.style.fontSize='20px';
      s.style.marginLeft=i===1?'0':'2px';
      s.dataset.v=i;
      $stars.appendChild(s);
    }
  }
  $stars.addEventListener('mousemove',e=>{const t=e.target.closest('span'); if(t) renderStars(+t.dataset.v);});
  $stars.addEventListener('mouseleave',()=>renderStars(starVal||0));
  $stars.addEventListener('click',e=>{const t=e.target.closest('span'); if(!t) return; starVal=+t.dataset.v; renderStars(starVal);});
  renderStars(0);

  function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }
  function cardHTML(it){
    const st=Math.max(0,Math.min(5,parseInt(it.stars||'0',10)||0));
    const star='‚òÖ'.repeat(st)+'‚òÜ'.repeat(5-st);
    const name=it.name||'Anonyme';
    const text=it.text||'';
    return `<div style="background:#f3f1e7;border-radius:14px;padding:18px;">
              <div style="color:#f7b500;font-size:18px;line-height:1">${star}</div>
              <div style="font-size:18px;margin-top:6px;color:#000">${escapeHtml(text)}</div>
              <div style="font-size:14px;color:#777;margin-top:8px">‚Äî ${escapeHtml(name)}</div>
            </div>`;
  }

  window.__onReviews = function(arr){
    try{
      const ordered=Array.isArray(arr)?arr.slice().reverse():[];
      $list.innerHTML = ordered.map(cardHTML).join('');
      if (window.setReviewCount) window.setReviewCount(ordered.length);
    }catch(e){}
  };

  function loadReviewsJSONP(){
    const s=document.createElement('script');
    s.src = SCRIPT_URL + '?n=20&callback=__onReviews&ts=' + Date.now();
    document.head.appendChild(s);
  }
  document.addEventListener('DOMContentLoaded', loadReviewsJSONP);

  $form.addEventListener('submit', async (e)=>{
    e.preventDefault();
    if (document.getElementById('rvHoney')?.value) return;
    const name=($name&&$name.value||'').trim()||'Anonyme';
    const text=($text&&$text.value||'').trim();
    if(!starVal){alert('Choisissez une note.');return;}
    if(!text){alert('Saisissez votre avis.');return;}
    const item={name, stars:starVal, text};
    $list.insertAdjacentHTML('afterbegin', cardHTML(item));
    try{
      await fetch(SCRIPT_URL,{method:'POST', mode:'no-cors', body: JSON.stringify(item)});
      setTimeout(loadReviewsJSONP, 1200);
    }catch(e){}
    if($name) $name.value='';
    if($text) $text.value='';
    starVal=0; renderStars(0);
  });
})();
</script>

<style>
  /* Dock styles */
  #reviewsDock{
    max-width:1120px; margin:10px auto 4px;
    display:flex; justify-content:center; align-items:center;
  }
  #reviewsCue{
    position:relative;
    padding:8px 14px; border-radius:999px;
    background:rgba(0,0,0,.65); color:#fff;
    font:600 14px var(--ui-font);
    display:flex; align-items:center; gap:8px;
    cursor:pointer; pointer-events:auto;
    backdrop-filter:saturate(1.2) blur(2px);
    box-shadow:0 4px 10px rgba(0,0,0,.25);
  }
  #reviewsCue .chev{font-size:14px; line-height:1;}
</style>
<script>
(function(){
  const reviews = document.getElementById('reviews');
  const demoWrap = document.querySelector('.demoWrap');
  if(!reviews || !demoWrap) return;

  // remove existing cue if any
  document.getElementById('reviewsCue')?.remove();
  document.getElementById('reviewsDock')?.remove();

  const dock = document.createElement('div');
  dock.id = 'reviewsDock';
  dock.style.cssText = 'max-width:1120px;margin:16px auto 34px;display:flex;justify-content:center;';
  const cue = document.createElement('div');
  cue.id = 'reviewsCue';
  cue.innerHTML = '<span class="chev">‚ñº</span><span id="rvCueText">View Reviews</span>';
  cue.addEventListener('click',()=>reviews.scrollIntoView({behavior:'smooth', block:'start'}));
  dock.appendChild(cue);

  // insert after demoWrap
  demoWrap.parentNode.insertBefore(dock, demoWrap.nextSibling);

  window.setReviewCount = function(n){
    const el = document.getElementById('rvCueText');
    if (el) el.textContent = n ? `View Reviews (${n})` : 'Voir les avis';
  };
})();
</script>
<footer style="
  background:#f2f0e6;
  padding:28px 0;
  font-family:var(--ui-font);
  text-align:center;
  font-size:15px;
  color:#555;
  border-top:1px solid #ddd;
">
  <div>SuperAzerty ¬© 2025</div>
  <div style="margin-top:6px;">
    Contact : <a href="mailto:contact@SuperAzerty.com" style="color:#333;text-decoration:none;">contact@SuperAzerty.com</a>
  </div>
</footer>
</body>
</html>
<style>
@media (max-width: 768px){
  /* HERO ÏòÅÏó≠: Ïù¥ÎØ∏ÏßÄ ÏûòÎ¶º Î∞©ÏßÄ */
  .hero{ min-height:auto; padding:16px 0; display:flex; flex-direction:column; align-items:center; }
  .hero img{
    position:static !important;   /* Ï†àÎåÄÎ∞∞Ïπò Ìï¥Ï†ú */
    inset:auto !important;
    width:100% !important;
    height:auto !important;
    object-fit:contain !important; /* ÏûòÎ¶º ÏóÜÏù¥ Ï∂ïÏÜå */
    object-position:center top !important;
    max-height:70vh;               /* ÌôîÎ©¥ ÎÑòÏπòÏßÄ ÏïäÍ≤å */
  }
  /* Î≤ÑÌäºÏùÄ Ïù¥ÎØ∏ÏßÄ ÏïÑÎûòÎ°ú */
  .hero .enter{
    position:static !important;
    margin-top:12px;
    padding:12px 20px;
    font-size:16px;
  }
}
</style>
<style>
/* iOSÍ∞Ä Í∏ÄÏûê ÌÅ¨Í∏∞ ÏûÑÏùò ÌôïÎåÄÌïòÎäî Í≤É Î∞©ÏßÄ */
html, body { -webkit-text-size-adjust: 100%; text-size-adjust: 100%; }

@media (max-width: 768px){
  /* Î™®Îã¨ Ïª®ÌÖåÏù¥ÎÑà: ÎÜíÏù¥ Ï†úÌïú + Ïä§ÌÅ¨Î°§ Í∞ÄÎä• */
  .modal{ align-items:flex-start; }
  .sheet{ width:96vw; max-height:90vh; border-radius:12px; overflow:auto; }

  /* Í≥µÌÜµ Ïä¨ÎùºÏù¥Îìú: Í≥†Ï†ï 16:9 ÎπÑÏú® Ï†úÍ±∞ */
  .slide{ aspect-ratio:auto; height:auto; }

  /* 1Î≤à Ïä¨ÎùºÏù¥Îìú(Ï†úÎ™©+Î∂àÎ¶ø+ÌÇ§ Ïù¥ÎØ∏ÏßÄ) - Ï†àÎåÄÎ∞∞Ïπò Ìï¥Ï†ú */
  .s1-wrap{ padding:16px !important; }
  .s1-wrap .title1,
  .s1-wrap .bullets,
  .s1-wrap .keysRow,
  .s1-wrap .stepno{
    position:static !important; left:auto !important; top:auto !important; bottom:auto !important;
  }
  .s1-wrap .title1{ font-size:24px !important; line-height:1.2; margin:0 0 8px; text-align:center; }
  .s1-wrap .bullets{ font-size:16px !important; line-height:1.5; text-align:left; margin:0 0 12px; }
  .s1-wrap .keysRow{ width:100% !important; max-width:none !important; margin:8px 0 6px; }
  .s1-wrap .stepno{ font-size:12px; text-align:center; color:#777; }

  /* 2~6Î≤à Í≥µÌÜµ Î†àÏù¥ÏïÑÏõÉ Îã®ÏàúÌôî */
  .frame{ display:block !important; padding:16px !important; }
  .keyIcon{ width:96px; height:auto; display:block; margin:0 auto 10px; }
  .hd{ font-size:20px !important; text-align:center; margin:0 0 6px; }
  .sub{ font-size:16px !important; text-align:center; margin:0 0 10px; }
  .rule{ display:grid; grid-template-columns:36px 1fr; gap:12px; margin-top:10px; }
  .ruleText{ font-size:15px !important; line-height:1.5; }

  /* 6/6 Î≤ÑÌäº: Í≥†Ï†ï ÏúÑÏπò Ìï¥Ï†ú ‚Üí Ìï≠ÏÉÅ Î≥¥Ïù¥Í≤å */
  .tryBig{
    position:static !important;
    display:block !important;
    width:100% !important;
    margin:16px 0 0 !important;
    padding:14px 0 !important;
    font-size:18px !important;
  }

  /* ÌïòÎã® ÎÑ§ÎπÑ Î≤ÑÌäº ÌÑ∞Ïπò Ï∂©Îèå Î∞©ÏßÄ(ÏúÑ ÏöîÏÜåÍ∞Ä ÎçÆÎäî Í≤É Ï∞®Îã®) */
  .nav{ position:sticky; bottom:0; z-index:2; }
}
</style>



<script>
(function(){
  const SEEN = window.UQ_IS_SEEN === true || localStorage.getItem('uq_seen_tutorial') === '1';
  const demo = document.getElementById('demo');
  const reviews = document.getElementById('reviews');
  if (!SEEN || !demo || !reviews) return;

  window.addEventListener('load', () => {
    let snapping = false;
    let idleTO = null;
    let lastInteractAt = 0;

    const hero = document.querySelector('.hero');

    function anchorPos(el){ return el ? el.offsetTop : 0; }
    function heroBottom(){
      return hero ? (hero.offsetTop + hero.offsetHeight) : 0;
    }

    function getAnchors(){
      const demoTop = anchorPos(demo);
      const revTop  = anchorPos(reviews);
      return { demoTop, revTop };
    }

    // Only decide to snap when user STOPS interacting for a short moment.
    function nudgeSnapSoon(delay=140){
      if (snapping) return;
      if (idleTO) clearTimeout(idleTO);
      idleTO = setTimeout(checkAndSnap, delay);
    }
    function checkAndSnap(){
      const y  = window.scrollY || window.pageYOffset;
      const vh = window.innerHeight || 0;
      const { demoTop, revTop } = getAnchors();

	// ‚úÖ Î¶¨Î∑∞ ÏÑπÏÖòÎ∂ÄÌÑ∞Îäî Ïä§ÎÉÖ ÎπÑÌôúÏÑ±Ìôî (Ïó¨Ïú† 60px Î≤ÑÌçº)
	if (y >= revTop - 60) return;

      // If still actively interacting very recently, skip.
      if (Date.now() - lastInteractAt < 80) return;

      const near = (target)=> Math.abs(y - target) <= vh * 0.35;

      const isNearDemo = near(demoTop);
      const isNearRev  = near(revTop);

      // If in between and not near either, do nothing.
      if (!isNearDemo && !isNearRev) return;

      // Choose nearest target.
      const target = (Math.abs(y - demoTop) <= Math.abs(y - revTop)) ? demoTop : revTop;

      // If already basically there, skip.
      if (Math.abs(y - target) < 6) return;

      doSnap(target);
    }

    function doSnap(targetY){
      snapping = true;
      window.scrollTo({ top: targetY, behavior: 'smooth' });
      // Release after motion
      const release = () => { snapping = false; window.removeEventListener('scroll', onDuringSnap); };
      let checks = 0;
      const onDuringSnap = () => {
        const y = window.scrollY || window.pageYOffset;
        if (Math.abs(y - targetY) < 2 || checks++ > 24) release();
      };
      window.addEventListener('scroll', onDuringSnap);
      setTimeout(release, 600);
    }

    function markInteract(){
      lastInteractAt = Date.now();
    }
    window.addEventListener('wheel',   () => { markInteract(); nudgeSnapSoon(160); }, { passive:true });
    window.addEventListener('touchmove', markInteract, { passive:true });
    window.addEventListener('touchend',  () => { markInteract(); nudgeSnapSoon(140); }, { passive:true });

    window.addEventListener('keydown', (e) => {
      // Arrow/PageUp/PageDown/Space/Home/End typical scroll keys
      const keys = ['ArrowDown','ArrowUp','PageDown','PageUp','Space','Home','End'];
      if (keys.includes(e.code) || keys.includes(e.key)) {
        markInteract();
        nudgeSnapSoon(180);
      }
    }, { passive:true });

    // Also run a gentle check after load if landing near anchors.
    nudgeSnapSoon(280);
  });
})();
</script>

<script>
// ? ‚Üî / ÏûÖÎ†• Ïä§Ïôë (ÏßÅÏ†ë Ï£ºÏûÖ Î∞©Ïãù)
(() => {
  const pad = document.getElementById('pad');
  if (!pad) return;

  pad.addEventListener('keydown', (e) => {
    if (e.ctrlKey || e.metaKey || e.altKey) return;
    if (e.key !== '?' && e.key !== '/') return;

    e.preventDefault();  // ÏõêÎûò ÏûÖÎ†• ÎßâÍ≥†
    const swapped = (e.key === '?') ? '/' : '?';

    // Ïª§ÏÑú ÏúÑÏπòÏóê ÏßÅÏ†ë ÏÇΩÏûÖ
    const s = pad.selectionStart ?? pad.value.length;
    const epos = pad.selectionEnd ?? pad.value.length;
    const v = pad.value ?? '';
    pad.value = v.slice(0, s) + swapped + v.slice(epos);
    pad.selectionStart = pad.selectionEnd = s + 1;
    pad.dispatchEvent(new Event('input', { bubbles: true }));
  });
  pad.addEventListener('input', () => {
    if (pad.selectionStart !== pad.selectionEnd) return;
    const s = (pad.selectionStart ?? (pad.value ? pad.value.length : 0));
    if (s < 2) return;
    const v = pad.value || '';
    const tail2 = v.slice(s - 2, s);
    if (tail2 === '.:') {
      replaceRange(pad, s - 2, s, ':');
    }
  });

// === Dead-key Í≤∞Í≥º Í∞êÏßÄ ÌõÑ Í∞úÎ∞úÏûê Î≥ÄÌôò (circumflex only) ===
pad.addEventListener('input', () => {
  const v = pad.value || '';
  if (!v) return;
  const s = pad.selectionStart ?? v.length;
  const tail2 = s >= 2 ? v.slice(s - 2, s) : '';
  const tail1 = v.slice(s - 1, s);

  function replaceRange(el, from, to, text){
    const vv = el.value || '';
    el.value = vv.slice(0, from) + text + vv.slice(to);
    el.selectionStart = el.selectionEnd = from + text.length;
  }

  if (devMap[tail2]) {
  if (tail1 === '√¢') replaceRange(pad, s - 1, s, '@');
    replaceRange(pad, s - 2, s, devMap[tail2]);
  } else if (devMap[tail1]) {
    replaceRange(pad, s - 1, s, devMap[tail1]);
  }
});

</script>


</body>
</html>